name: Deploy Swagger UI to GitHub Pages

on:
  push:
    branches:
      - main
  workflow_dispatch:

# Grant permissions for the job
permissions:
  contents: write # Required to push to the gh-pages branch

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # 1. Check out the repository
      - name: Checkout
        uses: actions/checkout@v4

      # 2. Generate and deploy the Swagger UI page
      # This single action does all the work:
      # - Fetches the swagger-ui-dist
      # - Injects your openapi.yaml
      # - Pushes the final static site to a 'gh-pages' branch
      - name: Deploy Swagger UI to GitHub Pages
        uses: peter-evans/swagger-github-pages@v4
        with:
          spec_file: openapi.yaml
